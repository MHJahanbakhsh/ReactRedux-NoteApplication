(this.webpackJsonpstreams=this.webpackJsonpstreams||[]).push([[0],{249:function(t,e,n){},250:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(16),i=n.n(r),s=n(10),o=n(9),u=n(8),l=n(17),d=n(18),b=n(30),j=n(24),h=n(23),p=n(26),O=n.n(p),f=n(3),m=n(41),v=n(112),g=n.n(v).a.create({baseURL:"https://fake-server-for-todoapp.herokuapp.com"}),x=n(14),y=Object(x.a)();var N=function(t){return function(){var e=Object(m.a)(O.a.mark((function e(n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/todos/".concat(t));case 2:a=e.sent,n({type:"FETCH_NOTE",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var I=n(255),k=n(254),S=n(1),E=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).myOnSubmit=a.myOnSubmit.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"toRender",value:function(t){return Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{className:"form-label",htmlFor:t.id,children:t.label}),Object(S.jsx)("input",Object(f.a)(Object(f.a)({className:"form-control",type:"text",id:t.id},t.input),{},{autoComplete:"off"})),t.meta.touched&&t.meta.error?Object(S.jsx)("div",{className:"alert alert-danger",role:"alert",children:t.meta.error}):"",Object(S.jsx)("br",{})]})}},{key:"myOnSubmit",value:function(t){this.props.onSubmit(t)}},{key:"render",value:function(){return Object(S.jsxs)("form",{className:"container",onSubmit:this.props.handleSubmit(this.myOnSubmit),children:[Object(S.jsx)(I.a,{name:"title",component:this.toRender,label:"Enter Title",id:"field1"}),Object(S.jsx)(I.a,{name:"description",component:this.toRender,label:"Enter Description",id:"field2"}),Object(S.jsx)("button",{className:"btn btn-primary btn-lg",children:"Submit"})]})}}]),n}(c.a.Component);var w=Object(k.a)({form:"noteForm",validate:function(t){var e={};return t.title||(e.title="you must enter a title"),t.description||(e.description="you must write some description"),e}})(E),C=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).createOnSubmit=a.createOnSubmit.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"createOnSubmit",value:function(t){this.props.createNote(t)}},{key:"render",value:function(){return Object(S.jsx)(w,{onSubmit:this.createOnSubmit})}}]),n}(c.a.Component),T=Object(s.b)(null,{createNote:function(t){return function(){var e=Object(m.a)(O.a.mark((function e(n,a){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a().auth.userId,e.next=3,g.post("/todos",Object(f.a)(Object(f.a)({},t),{},{userId:c}));case 3:r=e.sent,n({type:"CREATE_NOTE",payload:r.data}),y.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(C),_=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).editOnSubmit=function(e){t.props.editNote(t.props.match.params.id,e)},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchNote(this.props.match.params.id)}},{key:"render",value:function(){return this.props.note?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h3",{className:"container",children:"Edit Note"}),Object(S.jsx)(w,{onSubmit:this.editOnSubmit,initialValues:{title:this.props.note.title,description:this.props.note.description}})]}):Object(S.jsx)("div",{children:"loading"})}}]),n}(c.a.Component);var D=Object(s.b)((function(t,e){return{note:t.note[e.match.params.id]}}),{fetchNote:N,editNote:function(t,e){return function(){var n=Object(m.a)(O.a.mark((function n(a){var c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.patch("/todos/".concat(t),e);case 2:c=n.sent,a({type:"EDIT_NOTE",payload:c.data}),y.push("/");case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}})(_),A=n(29),F=n(253),R=n(20),U=function(t){var e=Object(a.useState)(!0),n=Object(A.a)(e,2);n[0],n[1];return i.a.createPortal(Object(S.jsx)("div",{onClick:function(){return y.push("/")},children:Object(S.jsxs)(F.a,{onClick:function(t){return t.stopPropagation()},show:!0,children:[Object(S.jsx)(F.a.Header,{children:t.title}),Object(S.jsx)(F.a.Body,{children:t.content}),Object(S.jsxs)(F.a.Footer,{children:[Object(S.jsx)(R.a,{to:"/",className:"btn btn-secondary",children:"close"}),Object(S.jsx)("button",{onClick:t.onDeleteClick,className:"btn btn-danger",children:"delete!"})]})]})}),document.getElementById("modal"))},L=Object(s.b)(null,{fetchNote:N,deleteNote:function(t){return function(){var e=Object(m.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("/todos/".concat(t));case 2:n({type:"DELETE_NOTE",payload:t}),y.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(t){Object(a.useEffect)((function(){t.fetchNote(e)}),[]);var e=t.match.params.id;return Object(S.jsx)(U,{title:"Delete Note",content:"do you want to delete Note with id ".concat(e),onDeleteClick:function(){return t.deleteNote(e)}})})),M=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).style={display:"flex",flexDirection:"row",justifyContent:"space-between"},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchNotes()}},{key:"add3Dots",value:function(t,e){return t.length>e&&(t=t.substring(0,e)+" ..."),t}},{key:"renderedList",value:function(){var t=this;return Object.values(this.props.notes).map((function(e){return Object(S.jsx)("div",{children:e.userId===t.props.currentUserId&&e.userId?Object(S.jsxs)("li",{className:"list-group-item",style:t.style,children:[Object(S.jsxs)("div",{className:"contents",children:[Object(S.jsx)("h3",{children:Object(S.jsx)(R.a,{to:"todo/".concat(e.id),children:e.title})}),Object(S.jsx)("p",{className:"notes-desc",children:t.add3Dots(e.description,200)}),e.description.length>200?Object(S.jsx)(R.a,{to:"todo/".concat(e.id),children:"read more"}):null]}),Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsx)(R.a,{to:"/todo/edit/".concat(e.id),className:"btn btn-primary",children:"Edit"}),Object(S.jsx)(R.a,{to:"/todo/delete/".concat(e.id),className:"btn btn-danger",children:"Delete"})]})]}):null},e.id)}))}},{key:"notSignedInMessage",value:function(){return Object(S.jsxs)("div",{style:{textAlign:"center"},children:[Object(S.jsx)("h1",{children:"welcome to my note application"}),Object(S.jsx)("h3",{children:"you must sign in via your google account to be able to add and view your notes"})]})}},{key:"signedInButNoNotes",value:function(){var t=!1;if(this.props.isSignedIn){for(var e=0,n=Object.values(this.props.notes);e<n.length;e++){n[e].userId===this.props.currentUserId&&(t=!0)}if(!t)return Object(S.jsx)("h3",{children:"not note has been added yet"})}return null}},{key:"render",value:function(){return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h1",{children:"Notes:"}),Object(S.jsxs)("ul",{className:"list-group",children:[this.props.isSignedIn?null:this.notSignedInMessage(),this.signedInButNoNotes(),this.renderedList()]}),Object(S.jsx)("br",{}),this.props.isSignedIn?Object(S.jsx)(R.a,{to:"/todo/new",className:"btn btn-primary btn-lg",style:{float:"right"},children:"Create Note"}):null]})}}]),n}(c.a.Component);var B=Object(s.b)((function(t){return{notes:t.note,currentUserId:t.auth.userId,isSignedIn:t.auth.isSignedIn}}),{fetchNotes:function(){return function(){var t=Object(m.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.get("/todos");case 2:n=t.sent,e({type:"FETCH_NOTES",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(M);var H=Object(s.b)((function(t,e){return console.log(t),{note:t.note[e.match.params.id]}}),{fetchNote:N})((function(t){var e=t.match.params.id;return Object(a.useEffect)((function(){return t.fetchNote(e)}),[]),t.note?Object(S.jsxs)("div",{className:"container card",children:[Object(S.jsxs)("h2",{className:"card-title",children:["Title : ",t.note.title]}),Object(S.jsxs)("p",{className:"card-text",children:["Content : ",t.note.description]})]}):null})),G=n(83),P=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).onAuthChange=function(t){t?a.props.signIn(a.auth.currentUser.get().getId()):a.props.signOut()},a.onsignInClick=a.onsignInClick.bind(Object(b.a)(a)),a.onsignOutClick=a.onsignOutClick.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"410916988914-l2sseql9jsjkv4nvleauphg9vfprcigu.apps.googleusercontent.com",scope:"email"}).then((function(){t.auth=window.gapi.auth2.getAuthInstance(),t.onAuthChange(t.auth.isSignedIn.get()),t.auth.isSignedIn.listen(t.onAuthChange)}))}))}},{key:"thingsToRender",value:function(){return!0===this.props.isSignedIn?Object(S.jsxs)("button",{className:"btn btn-danger",onClick:this.onsignInClick,children:["sign out ",Object(S.jsx)(G.a,{})]}):!1===this.props.isSignedIn?Object(S.jsxs)("button",{className:"btn btn-danger",onClick:this.onsignOutClick,children:["please sign in ",Object(S.jsx)(G.a,{})]}):null}},{key:"onsignInClick",value:function(){this.auth.signOut()}},{key:"onsignOutClick",value:function(){this.auth.signIn()}},{key:"render",value:function(){return Object(S.jsxs)(S.Fragment,{children:[" ",this.thingsToRender()]})}}]),n}(c.a.Component);var J=Object(s.b)((function(t){return{isSignedIn:t.auth.isSignedIn}}),{signIn:function(t){return{type:"SIGN_IN",payload:t}},signOut:function(){return{type:"SIGN_OUT"}}})(P),V=function(){return Object(S.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light",children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)(R.a,{to:"/",className:"navbar-brand btn",children:"Note App"}),Object(S.jsx)(R.a,{to:"/",className:"navbar-brand ms-auto",children:"All Notes"})," ",Object(S.jsx)(R.a,{to:"/",children:Object(S.jsx)(J,{})})]})})},X=function(){return Object(S.jsx)("div",{className:"app",children:Object(S.jsxs)(u.b,{history:y,children:[Object(S.jsx)(V,{}),Object(S.jsxs)(u.c,{children:[Object(S.jsx)(u.a,{path:"/",exact:!0,component:B}),"  ",Object(S.jsx)(u.a,{path:"/todo/new",component:T}),Object(S.jsx)(u.a,{path:"/todo/edit/:id",component:D}),Object(S.jsx)(u.a,{path:"/todo/delete/:id",component:L}),Object(S.jsx)(u.a,{path:"/todo/:id",component:H})]})]})})},q=n(19),K=n(256),z=n(82),Q=n.n(z),W={isSignedIn:null,userId:null};var Y=Object(o.c)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SIGN_IN":return Object(f.a)(Object(f.a)({},t),{},{isSignedIn:!0,userId:e.payload});case"SIGN_OUT":return Object(f.a)(Object(f.a)({},t),{},{isSignedIn:!1,userId:e.payload});default:return t}},form:K.a,note:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"EDIT-NOTE":case"CREATE_NOTE":case"FETCH_NOTE":return Object(f.a)(Object(f.a)({},t),{},Object(q.a)({},e.payload.id,e.payload));case"FETCH_NOTES":return Object(f.a)(Object(f.a)({},t),Q.a.mapKeys(e.payload,"id"));case"DELETE_NOTE":return Q.a.omit(t,e.payload);default:return t}}}),Z=n(118),$=(n(249),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d),tt=Object(o.e)(Y,$(Object(o.a)(Z.a)));i.a.render(Object(S.jsx)(s.a,{store:tt,children:Object(S.jsx)(X,{})}),document.getElementById("root"))}},[[250,1,2]]]);
//# sourceMappingURL=main.0d4ca847.chunk.js.map